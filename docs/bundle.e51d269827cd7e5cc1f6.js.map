{"version":3,"file":"bundle.e51d269827cd7e5cc1f6.js","mappings":"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","sources":["webpack://auqmia/./src/js/state/state.js","webpack://auqmia/./src/utils/calendar.js","webpack://auqmia/./src/js/features/calendar/calendar.js","webpack://auqmia/./src/utils/validators.js","webpack://auqmia/./src/js/features/appointments/appointments.js","webpack://auqmia/./src/utils/ids.js","webpack://auqmia/./src/js/main.js","webpack://auqmia/./src/js/state/store.js","webpack://auqmia/./src/js/features/modals/modals.js"],"sourcesContent":["const today = new Date();\nconst pad2 = (n) => String(n).padStart(2, \"0\");\nconst todayISO = `${today.getFullYear()}-${pad2(today.getMonth() + 1)}-${pad2(today.getDate())}`;\n\nexport const state = {\n  ui: {\n    modals: {\n      newAppointmentOpen: false,\n      calendarOpen: false,\n    },\n    selectedDateISO: \"\",\n    calendar: {\n      year: today.getFullYear(),\n      month: today.getMonth(),\n      selectedDateISO: todayISO,\n    },\n  },\n  data: {\n    appointments: [],\n  },\n};\n","const pad2 = (n) => String(n).padStart(2, \"0\");\n\nexport function toISODate(date) {\n  return `${date.getFullYear()}-${pad2(date.getMonth() + 1)}-${pad2(date.getDate())}`;\n}\n\nexport function addMonths(year, month, delta) {\n  const d = new Date(year, month + delta, 1);\n  return { year: d.getFullYear(), month: d.getMonth() };\n}\n\nexport function getMonthGrid(year, month) {\n  const first = new Date(year, month, 1);\n  const startDay = first.getDay();\n  const start = new Date(year, month, 1 - startDay);\n\n  const cells = [];\n  for (let i = 0; i < 42; i++) {\n    const d = new Date(start);\n    d.setDate(start.getDate() + i);\n\n    cells.push({\n      date: d,\n      dateISO: toISODate(d),\n      day: d.getDate(),\n      inMonth: d.getMonth() === month,\n    });\n  }\n  return cells;\n}\n","import { addMonths, getMonthGrid } from \"../../../utils/calendar.js\";\n\nfunction reduceCalendar(prevState, action) {\n  const cal = prevState.ui.calendar;\n\n  switch (action.type) {\n    case \"CAL_PREV\": {\n      const next = addMonths(cal.year, cal.month, -1);\n      return {\n        ...prevState,\n        ui: { ...prevState.ui, calendar: { ...cal, ...next } },\n      };\n    }\n\n    case \"CAL_NEXT\": {\n      const next = addMonths(cal.year, cal.month, 1);\n      return {\n        ...prevState,\n        ui: { ...prevState.ui, calendar: { ...cal, ...next } },\n      };\n    }\n\n    case \"CAL_SELECT_DATE\": {\n      return {\n        ...prevState,\n        ui: {\n          ...prevState.ui,\n          calendar: { ...cal, selectedDateISO: action.payload.dateISO },\n        },\n      };\n    }\n\n    default:\n      return prevState;\n  }\n}\n\nfunction monthLabelPT(monthIndex) {\n  const names = [\n    \"Janeiro\",\n    \"Fevereiro\",\n    \"Março\",\n    \"Abril\",\n    \"Maio\",\n    \"Junho\",\n    \"Julho\",\n    \"Agosto\",\n    \"Setembro\",\n    \"Outubro\",\n    \"Novembro\",\n    \"Dezembro\",\n  ];\n  return names[monthIndex];\n}\n\nfunction buildDotsForDate(state, dateISO) {\n  const appts = state.data.appointments || [];\n  const onDay = appts.filter((a) => a.dateISO === dateISO);\n\n  const hasDog = onDay.some((a) => a.petType === \"dog\");\n  const hasCat = onDay.some((a) => a.petType === \"cat\");\n\n  return { hasDog, hasCat };\n}\n\nexport function initCalendar(store) {\n  const monthEl = document.querySelector(\"[data-calendar-month]\");\n  const yearEl = document.querySelector(\"[data-calendar-year]\");\n  const gridEl = document.querySelector(\"[data-calendar-grid]\");\n  const countEl = document.querySelector(\"[data-calendar-count]\");\n\n  if (!monthEl || !yearEl || !gridEl) return;\n\n  function dispatch(action) {\n    store.update((s) => reduceCalendar(s, action));\n  }\n\n  function render(state) {\n    const { year, month, selectedDateISO } = state.ui.calendar;\n\n    monthEl.textContent = monthLabelPT(month);\n    yearEl.textContent = String(year);\n    if (countEl) {\n      const count = (state.data.appointments || []).filter((a) => {\n        const [y, m] = a.dateISO.split(\"-\").map(Number);\n        return y === year && m === month + 1;\n      }).length;\n      countEl.textContent = String(count);\n    }\n\n    const cells = getMonthGrid(year, month);\n    gridEl.innerHTML = \"\";\n\n    const todayISO = state.ui.calendar.selectedDateISO ? null : null;\n    const actualTodayISO = (() => {\n      const d = new Date();\n      const pad2 = (n) => String(n).padStart(2, \"0\");\n      return `${d.getFullYear()}-${pad2(d.getMonth() + 1)}-${pad2(d.getDate())}`;\n    })();\n\n    cells.forEach((c) => {\n      const btn = document.createElement(\"button\");\n      btn.type = \"button\";\n      btn.className = \"calendar__day\";\n      btn.dataset.date = c.dateISO;\n      btn.setAttribute(\"role\", \"gridcell\");\n\n      if (!c.inMonth) {\n        btn.setAttribute(\"aria-disabled\", \"true\");\n        btn.disabled = true;\n      }\n\n      if (c.dateISO === selectedDateISO) {\n        btn.classList.add(\"calendar__day--selected\");\n      }\n\n      if (c.dateISO === actualTodayISO) {\n        btn.classList.add(\"calendar__day--today\");\n      }\n\n      btn.textContent = String(c.day);\n\n      const { hasDog, hasCat } = buildDotsForDate(state, c.dateISO);\n      if (hasDog || hasCat) {\n        const dots = document.createElement(\"div\");\n        dots.className = \"calendar__dots\";\n\n        if (hasDog) {\n          const d = document.createElement(\"span\");\n          d.className = \"calendar__dot calendar__dot--dog\";\n          d.setAttribute(\"aria-hidden\", \"true\");\n          dots.appendChild(d);\n        }\n        if (hasCat) {\n          const d = document.createElement(\"span\");\n          d.className = \"calendar__dot calendar__dot--cat\";\n          d.setAttribute(\"aria-hidden\", \"true\");\n          dots.appendChild(d);\n        }\n\n        btn.appendChild(dots);\n      }\n\n      gridEl.appendChild(btn);\n    });\n  }\n\n  render(store.getState());\n  store.subscribe(render);\n\n  document.addEventListener(\"click\", (e) => {\n    const actionEl = e.target.closest(\"[data-action]\");\n    if (actionEl) {\n      const a = actionEl.dataset.action;\n      if (a === \"calendar-prev\") dispatch({ type: \"CAL_PREV\" });\n      if (a === \"calendar-next\") dispatch({ type: \"CAL_NEXT\" });\n    }\n\n    const dayEl = e.target.closest(\".calendar__day[data-date]\");\n    if (dayEl && !dayEl.disabled) {\n      const dateISO = dayEl.dataset.date;\n      store.update((prev) => {\n        const withDate = reduceCalendar(prev, {\n          type: \"CAL_SELECT_DATE\",\n          payload: { dateISO },\n        });\n        return {\n          ...withDate,\n          ui: {\n            ...withDate.ui,\n            modals: { ...withDate.ui.modals, calendarOpen: false },\n          },\n        };\n      });\n    }\n  });\n}\n","const isEmpty = (v) => !v || String(v).trim() === \"\";\nconst pad2 = (n) => String(n).padStart(2, \"0\");\nconst toISODate = (date) =>\n  `${date.getFullYear()}-${pad2(date.getMonth() + 1)}-${pad2(date.getDate())}`;\n\nexport function validateAppointment(draft) {\n  const errors = {};\n\n  if (![\"dog\", \"cat\"].includes(draft.petType))\n    errors.petType = \"Selecione o tipo\";\n  if (isEmpty(draft.petName)) errors.petName = \"Informe o nome do pet\";\n  if (isEmpty(draft.ownerName)) errors.ownerName = \"Informe o nome do tutor\";\n  if (isEmpty(draft.service)) errors.service = \"Selecione o serviço\";\n  if (isEmpty(draft.time)) errors.time = \"Informe o horário\";\n  if (isEmpty(draft.dateISO)) errors.dateISO = \"Informe a data\";\n\n  if (!errors.dateISO) {\n    const todayISO = toISODate(new Date());\n    if (draft.dateISO < todayISO) {\n      errors.dateISO = \"Data já passou\";\n    }\n  }\n\n  if (!errors.time && !errors.dateISO) {\n    const todayISO = toISODate(new Date());\n    if (draft.dateISO === todayISO) {\n      const [hh, mm] = String(draft.time).split(\":\").map(Number);\n      if (Number.isFinite(hh) && Number.isFinite(mm)) {\n        const now = new Date();\n        const scheduled = new Date();\n        scheduled.setHours(hh, mm, 0, 0);\n        if (scheduled.getTime() < now.getTime()) {\n          errors.time = \"Horário já passou\";\n        }\n      }\n    }\n  }\n\n  return { ok: Object.keys(errors).length === 0, errors };\n}\n","import { makeId } from \"../../../utils/ids.js\";\nimport { validateAppointment } from \"../../../utils/validators.js\";\nimport fallbackData from \"../../../data/fallback.json\";\n\nconst API_BASE = \"/api\";\nconst IS_BROWSER = typeof window !== \"undefined\";\nconst IS_LOCALHOST =\n  IS_BROWSER &&\n  (window.location.hostname === \"localhost\" ||\n    window.location.hostname === \"127.0.0.1\");\nconst USE_API = IS_LOCALHOST;\n\nconst STORAGE_KEYS = {\n  services: \"auqmia:services\",\n  appointments: \"auqmia:appointments\",\n};\n\nfunction cloneList(list) {\n  if (!Array.isArray(list)) return [];\n  return list.map((item) =>\n    item && typeof item === \"object\" ? { ...item } : item,\n  );\n}\n\nfunction canUseStorage() {\n  if (!IS_BROWSER || !window.localStorage) return false;\n  try {\n    const key = \"__auqmia_storage_test__\";\n    window.localStorage.setItem(key, \"1\");\n    window.localStorage.removeItem(key);\n    return true;\n  } catch (err) {\n    return false;\n  }\n}\n\nconst STORAGE_AVAILABLE = canUseStorage();\nconst FALLBACK_SERVICES = cloneList(fallbackData?.services);\nconst FALLBACK_APPOINTMENTS = cloneList(fallbackData?.appointments);\n\nfunction readStoredArray(key, fallback) {\n  if (!STORAGE_AVAILABLE) return cloneList(fallback);\n  try {\n    const raw = window.localStorage.getItem(key);\n    if (!raw) {\n      const seeded = cloneList(fallback);\n      window.localStorage.setItem(key, JSON.stringify(seeded));\n      return seeded;\n    }\n    const parsed = JSON.parse(raw);\n    if (Array.isArray(parsed)) return parsed;\n  } catch (err) {\n    // ignore storage errors\n  }\n  return cloneList(fallback);\n}\n\nfunction writeStoredArray(key, value) {\n  if (!STORAGE_AVAILABLE) return;\n  try {\n    window.localStorage.setItem(key, JSON.stringify(value));\n  } catch (err) {\n    // ignore storage errors\n  }\n}\n\nconst localData = {\n  services: readStoredArray(STORAGE_KEYS.services, FALLBACK_SERVICES),\n  appointments: readStoredArray(\n    STORAGE_KEYS.appointments,\n    FALLBACK_APPOINTMENTS,\n  ),\n};\n\nfunction getPeriod(timeHHMM) {\n  const [hh] = timeHHMM.split(\":\").map(Number);\n  if (hh < 12) return \"morning\";\n  if (hh < 18) return \"afternoon\";\n  return \"night\";\n}\n\nfunction sortByTime(a, b) {\n  return a.time.localeCompare(b.time);\n}\n\nconst SERVICE_META = {\n  \"bath-groom\": { icon: \"solar:bath-linear\" },\n  \"vet-consult\": { icon: \"mdi:stethoscope\" },\n  vaccination: { icon: \"solar:syringe-linear\" },\n  deworming: { icon: \"mdi:pill\" },\n  \"flea-tick\": { icon: \"mdi:bug\" },\n};\n\nconst serviceCatalog = {};\n\nfunction getServiceMeta(serviceId) {\n  if (SERVICE_META[serviceId]) return SERVICE_META[serviceId];\n  return { icon: \"solar:scissors-linear\" };\n}\n\nfunction getCalendarFromISO(dateISO) {\n  const [yearStr, monthStr] = dateISO.split(\"-\");\n  const year = Number(yearStr);\n  const month = Number(monthStr) - 1;\n\n  return { year, month, selectedDateISO: dateISO };\n}\n\nfunction reduceAppointments(prevState, action) {\n  if (action.type !== \"ADD_APPOINTMENT\" && action.type !== \"REMOVE_APPOINTMENT\")\n    return prevState;\n\n  const nextAppointments =\n    action.type === \"ADD_APPOINTMENT\"\n      ? [...prevState.data.appointments, action.payload.appointment]\n      : prevState.data.appointments.filter(\n          (appointment) => appointment.id !== action.payload.id,\n        );\n\n  return {\n    ...prevState,\n    data: { ...prevState.data, appointments: nextAppointments },\n  };\n}\n\nfunction clearEl(el) {\n  while (el.firstChild) el.removeChild(el.firstChild);\n}\n\nfunction renderEmpty(listEl, label) {\n  const li = document.createElement(\"li\");\n  li.className = \"empty-state\";\n  li.textContent = `Sem agendamentos (${label})`;\n  listEl.appendChild(li);\n}\n\nfunction renderCard(appt) {\n  const li = document.createElement(\"li\");\n  li.className = `appt-card appt-card--${appt.petType || \"dog\"}`;\n\n  const top = document.createElement(\"div\");\n  top.className = \"appt-card__top\";\n\n  const identity = document.createElement(\"div\");\n  identity.className = \"appt-card__identity\";\n\n  const avatar = document.createElement(\"div\");\n  avatar.className = `appt-card__avatar appt-card__avatar--${appt.petType || \"dog\"}`;\n\n  const petIcon = document.createElement(\"iconify-icon\");\n  petIcon.setAttribute(\n    \"icon\",\n    appt.petType === \"cat\" ? \"solar:cat-linear\" : \"mdi:dog\",\n  );\n  petIcon.setAttribute(\"aria-hidden\", \"true\");\n  petIcon.className = \"appt-card__avatar-icon\";\n  avatar.appendChild(petIcon);\n\n  const identityText = document.createElement(\"div\");\n\n  const title = document.createElement(\"h3\");\n  title.className = \"appt-card__pet\";\n  title.textContent = appt.petName;\n\n  const owner = document.createElement(\"p\");\n  owner.className = \"appt-card__owner\";\n  owner.textContent = appt.ownerName;\n\n  identityText.append(title, owner);\n  identity.append(avatar, identityText);\n\n  const time = document.createElement(\"span\");\n  time.className = \"appt-card__time\";\n  time.textContent = appt.time;\n\n  top.append(identity, time);\n\n  const footer = document.createElement(\"div\");\n  footer.className = \"appt-card__footer\";\n\n  const service = document.createElement(\"div\");\n  service.className = \"appt-card__service\";\n\n  const serviceMeta = getServiceMeta(appt.service);\n  const serviceIcon = document.createElement(\"iconify-icon\");\n  serviceIcon.setAttribute(\"icon\", serviceMeta.icon);\n  serviceIcon.setAttribute(\"aria-hidden\", \"true\");\n  serviceIcon.className = \"appt-card__service-icon\";\n\n  const serviceLabel = document.createElement(\"span\");\n  serviceLabel.className = \"appt-card__service-label\";\n  serviceLabel.textContent =\n    serviceCatalog[appt.service]?.label || appt.service || \"Service\";\n\n  service.append(serviceIcon, serviceLabel);\n\n  const actions = document.createElement(\"div\");\n  actions.className = \"appt-card__actions\";\n\n  const editBtn = document.createElement(\"button\");\n  editBtn.type = \"button\";\n  editBtn.className = \"appt-card__action\";\n  editBtn.setAttribute(\"aria-label\", \"Delete\");\n  editBtn.dataset.action = \"delete-appointment\";\n  editBtn.dataset.appointmentId = appt.id;\n\n  const editIcon = document.createElement(\"iconify-icon\");\n  editIcon.setAttribute(\"icon\", \"solar:trash-bin-trash-linear\");\n  editIcon.setAttribute(\"aria-hidden\", \"true\");\n  editBtn.appendChild(editIcon);\n\n  actions.appendChild(editBtn);\n  footer.append(service, actions);\n\n  li.append(top, footer);\n  return li;\n}\n\nfunction renderDaily(state) {\n  const selectedDateISO = state.ui.calendar.selectedDateISO;\n\n  const slots = {\n    morning: document.querySelector('[data-slot=\"morning\"]'),\n    afternoon: document.querySelector('[data-slot=\"afternoon\"]'),\n    night: document.querySelector('[data-slot=\"night\"]'),\n  };\n\n  if (!slots.morning || !slots.afternoon || !slots.night) return;\n\n  Object.values(slots).forEach(clearEl);\n\n  const todays = state.data.appointments\n    .filter((a) => a.dateISO === selectedDateISO)\n    .slice()\n    .sort(sortByTime);\n\n  const grouped = { morning: [], afternoon: [], night: [] };\n  todays.forEach((a) => grouped[getPeriod(a.time)].push(a));\n\n  if (!grouped.morning.length) renderEmpty(slots.morning, \"manhã\");\n  else grouped.morning.forEach((a) => slots.morning.appendChild(renderCard(a)));\n\n  if (!grouped.afternoon.length) renderEmpty(slots.afternoon, \"tarde\");\n  else\n    grouped.afternoon.forEach((a) =>\n      slots.afternoon.appendChild(renderCard(a)),\n    );\n\n  if (!grouped.night.length) renderEmpty(slots.night, \"noite\");\n  else grouped.night.forEach((a) => slots.night.appendChild(renderCard(a)));\n}\n\nexport function initAppointments(store) {\n  const modalNew = document.getElementById(\"modal-new\");\n  const form = modalNew?.querySelector(\"form.form\");\n  if (!form) return;\n\n  const submitIcon = form.querySelector(\"[data-submit-icon]\");\n  const submitButton = form.querySelector(\".form__submit\");\n  const serviceSelect = form.elements?.service;\n  const dateInputEl = form.elements?.dateISO;\n  const notice = document.querySelector(\"[data-notice]\");\n  const noticeMessage = notice?.querySelector(\"[data-notice-message]\");\n  let noticeTimer = null;\n  let noticeCooldown = false;\n  let noticeCooldownTimer = null;\n  let noticeResetTimer = null;\n\n  const FIELDS = [\n    \"petType\",\n    \"petName\",\n    \"ownerName\",\n    \"service\",\n    \"time\",\n    \"dateISO\",\n  ];\n\n  function renderFormErrors(errors) {\n    const errorEls = form.querySelectorAll(\"[data-error-for]\");\n    errorEls.forEach((el) => {\n      const key = el.getAttribute(\"data-error-for\");\n      el.textContent = errors[key] || \"\";\n    });\n  }\n\n  function clearInlineErrors() {\n    renderFormErrors({});\n    FIELDS.forEach((field) => setInvalid(field, false));\n  }\n\n  function closeNotice() {\n    if (!notice) return;\n    notice.dataset.open = \"false\";\n    if (noticeTimer) {\n      clearTimeout(noticeTimer);\n      noticeTimer = null;\n    }\n    setTimeout(() => {\n      notice.hidden = true;\n    }, 250);\n  }\n\n  function showNotice(message) {\n    if (!notice || !noticeMessage || !message) return;\n    if (noticeCooldown) return;\n    noticeMessage.textContent = message;\n    notice.hidden = false;\n    requestAnimationFrame(() => {\n      notice.dataset.open = \"true\";\n    });\n    if (noticeTimer) clearTimeout(noticeTimer);\n    noticeTimer = setTimeout(closeNotice, 1500);\n    if (noticeCooldownTimer) clearTimeout(noticeCooldownTimer);\n    noticeCooldown = true;\n    noticeCooldownTimer = setTimeout(() => {\n      noticeCooldown = false;\n    }, 1500);\n\n    if (noticeResetTimer) clearTimeout(noticeResetTimer);\n    noticeResetTimer = setTimeout(() => {\n      clearInlineErrors();\n      updateSubmitIcon();\n      noticeResetTimer = null;\n    }, 1500);\n  }\n\n  function formatNoticeMessage(errors) {\n    const messages = Object.values(errors).filter(Boolean);\n    return messages.length ? messages.join(\" • \") : \"\";\n  }\n\n  async function fetchJson(url, options) {\n    const res = await fetch(url, options);\n    if (!res.ok) throw new Error(\"Request failed\");\n    return res.json();\n  }\n\n  function applyServices(data) {\n    if (!serviceSelect || !Array.isArray(data)) return;\n\n    Object.keys(serviceCatalog).forEach((key) => delete serviceCatalog[key]);\n    const fragment = document.createDocumentFragment();\n    data.forEach((item) => {\n      if (!item || !item.id || !item.label) return;\n      serviceCatalog[item.id] = { label: item.label };\n      const opt = document.createElement(\"option\");\n      opt.value = item.id;\n      opt.textContent = item.label;\n      fragment.appendChild(opt);\n    });\n\n    while (serviceSelect.options.length > 1) {\n      serviceSelect.remove(1);\n    }\n    serviceSelect.appendChild(fragment);\n    render(store.getState());\n  }\n\n  async function loadServices() {\n    if (!serviceSelect) return;\n    serviceSelect.disabled = true;\n    try {\n      const data = USE_API\n        ? await fetchJson(`${API_BASE}/services`)\n        : localData.services;\n      if (!Array.isArray(data)) throw new Error(\"Invalid services payload\");\n\n      if (!USE_API) {\n        localData.services = data;\n        writeStoredArray(STORAGE_KEYS.services, data);\n      }\n\n      applyServices(data);\n    } catch (err) {\n      applyServices(localData.services);\n    } finally {\n      serviceSelect.disabled = false;\n    }\n  }\n\n  function applyAppointments(data) {\n    if (!Array.isArray(data)) return;\n    store.update((prev) => ({\n      ...prev,\n      data: { ...prev.data, appointments: data },\n    }));\n  }\n\n  async function loadAppointments() {\n    try {\n      const data = USE_API\n        ? await fetchJson(`${API_BASE}/appointments`)\n        : localData.appointments;\n      if (!Array.isArray(data)) throw new Error(\"Invalid appointments payload\");\n\n      if (!USE_API) {\n        localData.appointments = data;\n        writeStoredArray(STORAGE_KEYS.appointments, data);\n      }\n\n      applyAppointments(data);\n    } catch (err) {\n      applyAppointments(localData.appointments);\n    }\n  }\n\n  async function createAppointment(appointment) {\n    if (USE_API) {\n      return fetchJson(`${API_BASE}/appointments`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(appointment),\n      });\n    }\n\n    const next = [...localData.appointments, appointment];\n    localData.appointments = next;\n    writeStoredArray(STORAGE_KEYS.appointments, next);\n    return appointment;\n  }\n\n  async function deleteAppointment(id) {\n    if (USE_API) {\n      const res = await fetch(\n        `${API_BASE}/appointments/${encodeURIComponent(id)}`,\n        {\n          method: \"DELETE\",\n        },\n      );\n      if (!res.ok) throw new Error(\"Failed to delete\");\n      return;\n    }\n\n    const next = localData.appointments.filter(\n      (appointment) => appointment.id !== id,\n    );\n    localData.appointments = next;\n    writeStoredArray(STORAGE_KEYS.appointments, next);\n  }\n\n  function setInvalid(field, isInvalid) {\n    const target =\n      field === \"petType\"\n        ? form.querySelector('[data-field=\"petType\"]')\n        : form.elements?.[field];\n\n    if (!target || typeof target.setAttribute !== \"function\") return;\n\n    if (isInvalid) target.setAttribute(\"aria-invalid\", \"true\");\n    else target.removeAttribute(\"aria-invalid\");\n  }\n\n  function closeAllModals(nextState) {\n    return {\n      ...nextState,\n      ui: {\n        ...nextState.ui,\n        modals: { calendarOpen: false, newAppointmentOpen: false },\n      },\n    };\n  }\n\n  function updateCalendar(nextState, dateISO) {\n    return {\n      ...nextState,\n      ui: {\n        ...nextState.ui,\n        calendar: {\n          ...nextState.ui.calendar,\n          ...getCalendarFromISO(dateISO),\n        },\n      },\n    };\n  }\n\n  function dispatchAdd(appointment) {\n    store.update((prev) => {\n      const withAppt = reduceAppointments(prev, {\n        type: \"ADD_APPOINTMENT\",\n        payload: { appointment },\n      });\n      return closeAllModals(withAppt);\n    });\n  }\n\n  function dispatchRemove(id) {\n    store.update((prev) =>\n      reduceAppointments(prev, {\n        type: \"REMOVE_APPOINTMENT\",\n        payload: { id },\n      }),\n    );\n  }\n\n  function render(state) {\n    renderDaily(state);\n\n    if (state.ui.modals.newAppointmentOpen) {\n      if (dateInputEl && !dateInputEl.value) {\n        dateInputEl.value = state.ui.calendar.selectedDateISO;\n      }\n    }\n  }\n\n  function updateSubmitIcon() {\n    const selected = form.querySelector('input[name=\"petType\"]:checked');\n    const icon = selected?.dataset?.icon;\n    const petType = selected?.value;\n\n    if (submitButton) {\n      submitButton.classList.remove(\n        \"form__submit--dog\",\n        \"form__submit--cat\",\n      );\n      if (petType === \"dog\") submitButton.classList.add(\"form__submit--dog\");\n      if (petType === \"cat\") submitButton.classList.add(\"form__submit--cat\");\n    }\n\n    if (!submitIcon) return;\n\n    if (!icon) {\n      submitIcon.hidden = true;\n      submitIcon.removeAttribute(\"icon\");\n      return;\n    }\n\n    submitIcon.setAttribute(\"icon\", icon);\n    submitIcon.hidden = false;\n  }\n\n  render(store.getState());\n  store.subscribe(render);\n\n  updateSubmitIcon();\n  loadServices();\n  loadAppointments();\n\n  if (dateInputEl) {\n    dateInputEl.addEventListener(\"change\", () => {\n      if (!dateInputEl.value) return;\n      store.update((prev) => updateCalendar(prev, dateInputEl.value));\n    });\n  }\n\n\n  form.addEventListener(\"change\", (e) => {\n    const target = e.target;\n    if (!(target instanceof HTMLInputElement)) return;\n    if (target.name !== \"petType\") return;\n    updateSubmitIcon();\n  });\n\n  form.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n\n    const fd = new FormData(form);\n    const draft = {\n      petType: String(fd.get(\"petType\") || \"\"),\n      petName: String(fd.get(\"petName\") || \"\"),\n      ownerName: String(fd.get(\"ownerName\") || \"\"),\n      service: String(fd.get(\"service\") || \"\"),\n      time: String(fd.get(\"time\") || \"\"),\n      dateISO: String(\n        fd.get(\"dateISO\") || store.getState().ui.calendar.selectedDateISO || \"\",\n      ),\n    };\n\n    const { ok, errors } = validateAppointment(draft);\n\n    if (!ok) {\n      renderFormErrors(errors);\n      Object.keys(errors).forEach((field) => setInvalid(field, true));\n      showNotice(formatNoticeMessage(errors));\n      return;\n    }\n\n    renderFormErrors({});\n    FIELDS.forEach((f) => setInvalid(f, false));\n\n    const hasConflict = store\n      .getState()\n      .data.appointments.some(\n        (appointment) =>\n          appointment.dateISO === draft.dateISO &&\n          appointment.time === draft.time,\n      );\n\n    if (hasConflict) {\n      const conflictError = { time: \"Horário já ocupado\" };\n      renderFormErrors(conflictError);\n      setInvalid(\"time\", true);\n      showNotice(formatNoticeMessage(conflictError));\n      return;\n    }\n\n    const appointment = { id: makeId(), ...draft };\n\n    try {\n      const saved = await createAppointment(appointment);\n      dispatchAdd(saved);\n    } catch (err) {\n      showNotice(\"Unable to save appointment\");\n      return;\n    }\n    form.reset();\n    updateSubmitIcon();\n  });\n\n  document.addEventListener(\"click\", async (e) => {\n    const target = e.target;\n    if (!(target instanceof HTMLElement)) return;\n    const btn = target.closest('[data-action=\"delete-appointment\"]');\n    if (!btn) return;\n    e.preventDefault();\n    e.stopPropagation();\n    const id = btn.getAttribute(\"data-appointment-id\");\n    if (!id) return;\n    dispatchRemove(id);\n    try {\n      await deleteAppointment(id);\n    } catch (err) {\n      showNotice(\"Unable to delete appointment\");\n      loadAppointments();\n    }\n  });\n}\n","export function makeId() {\n  return `${Date.now()}-${Math.random().toString(16).slice(2)}`;\n}\n","import \"../styles/app.css\";\n\nimport { state as initialState } from \"./state/state.js\";\nimport { createStore } from \"./state/store.js\";\nimport { initModals } from \"./features/modals/modals.js\";\nimport { initCalendar } from \"./features/calendar/calendar.js\";\nimport { initAppointments } from \"./features/appointments/appointments.js\";\nimport { toISODate } from \"../utils/calendar.js\";\n\nconst store = createStore(initialState);\n\nfunction formatPtBrDate(date) {\n  const formatted = date.toLocaleDateString(\"pt-BR\", {\n    weekday: \"long\",\n    day: \"2-digit\",\n    month: \"long\",\n  });\n\n  return formatted\n    .replace(/^./, (c) => c.toUpperCase())\n    .replace(/ de ([a-záéíóúãõç])/g, (_, ch) => ` de ${ch.toUpperCase()}`);\n}\n\nfunction initHeaderDate(store) {\n  const timeEl = document.querySelector(\".app-header__date time\");\n  if (!timeEl) return;\n\n  let lastDateISO = null;\n\n  function parseISO(dateISO) {\n    if (!dateISO) return new Date();\n    const [year, month, day] = dateISO.split(\"-\").map(Number);\n    if (!year || !month || !day) return new Date();\n    return new Date(year, month - 1, day);\n  }\n\n  function render(state) {\n    const selectedISO =\n      state?.ui?.calendar?.selectedDateISO || toISODate(new Date());\n    if (selectedISO === lastDateISO) return;\n    lastDateISO = selectedISO;\n    const date = parseISO(selectedISO);\n    timeEl.dateTime = selectedISO;\n    timeEl.textContent = formatPtBrDate(date);\n  }\n\n  render(store.getState());\n  store.subscribe(render);\n}\n\nfunction initLoader() {\n  const loader = document.getElementById(\"loader-screen\");\n  const appContent = document.getElementById(\"app-content\");\n  if (!loader || !appContent) return;\n\n  const duration = 2000;\n  const start = performance.now();\n  const progressBar = document.getElementById(\"loader-progress\");\n  const percentText = document.getElementById(\"loader-percentage\");\n  const catRunner = document.getElementById(\"cat-runner\");\n  const dogRunner = document.getElementById(\"dog-runner\");\n\n  function update(now) {\n    const elapsed = now - start;\n    const progress = Math.min(elapsed / duration, 1);\n    const percent = Math.floor(progress * 100);\n\n    if (percentText) percentText.textContent = `${percent}%`;\n    if (progressBar) progressBar.style.width = `${percent}%`;\n\n    if (catRunner) catRunner.style.left = `${15 + progress * 85}%`;\n    if (dogRunner) dogRunner.style.left = `${progress * 85}%`;\n\n    if (progress < 1) {\n      requestAnimationFrame(update);\n      return;\n    }\n\n    setTimeout(() => {\n      loader.classList.add(\"loader-hidden\");\n      appContent.classList.add(\"loaded\");\n      document.body.classList.remove(\"is-loading\");\n    }, 400);\n  }\n\n  requestAnimationFrame(update);\n}\n\nfunction preventFormReloads() {\n  document.addEventListener(\n    \"submit\",\n    (e) => {\n      const form = e.target?.closest?.(\"form\");\n      if (!form || !form.classList?.contains(\"form\")) return;\n      e.preventDefault();\n    },\n    true,\n  );\n}\n\nfunction initParticlesBackground() {\n  if (typeof window === \"undefined\") return;\n  if (!window.particlesJS) return;\n  if (!document.getElementById(\"particles-js\")) return;\n\n  const pawSvg =\n    \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'%3E%3Cpath fill='%23ffffff' d='M18.37 8.51c.56-.33 1.65-.46 2.54.07 1.06.64 1.57 2.2 1.01 2.84-.56.64-1.96.69-3.02.05-1.06-.63-1.1-2.62-.53-2.96zm-4.72-3.65c.82-.47 2.09-.13 2.84 1.18.76 1.31.28 3.09-.54 3.55-.83.47-2.1.14-2.85-1.18-.76-1.31-.28-3.09.55-3.55zm-5.7.07c.86-.26 2.06.4 2.55 1.83.49 1.44-.1 2.98-.96 3.24-.85.26-2.06-.4-2.55-1.83-.49-1.44.1-2.98.96-3.24zm-5.2 5.7c.56-.25 1.69-.09 2.38.74.68.83.55 2.43-.01 2.68-.56.26-1.86-.11-2.54-.94-.68-.83-.4-2.23.17-2.48zM8.87 13.84c2.08-1.02 4.82-.56 6.45.92 1.94 1.76 1.71 5.59-.19 7.66-1.73 1.88-5.2 2.58-7.9.15-2.46-2.21-1.84-5.89.09-7.66 1.42-1.3 3.82-1.55 5.95-1.07z'/%3E%3C/svg%3E\";\n\n  window.particlesJS(\"particles-js\", {\n    particles: {\n      number: {\n        value: 30,\n        density: { enable: true, value_area: 800 },\n      },\n      color: { value: [\"#22d3ee\", \"#e879f9\"] },\n      shape: {\n        type: [\"circle\", \"image\"],\n        image: { src: pawSvg, width: 100, height: 100 },\n      },\n      opacity: {\n        value: 0.4,\n        random: true,\n        anim: { enable: true, speed: 1, opacity_min: 0.1, sync: false },\n      },\n      size: {\n        value: 8,\n        random: true,\n        anim: { enable: false, speed: 40, size_min: 0.1, sync: false },\n      },\n      line_linked: {\n        enable: true,\n        distance: 150,\n        color: \"#6366f1\",\n        opacity: 0.15,\n        width: 1,\n      },\n      move: {\n        enable: true,\n        speed: 1.5,\n        direction: \"none\",\n        random: true,\n        straight: false,\n        out_mode: \"out\",\n        bounce: false,\n      },\n    },\n    interactivity: {\n      detect_on: \"canvas\",\n      events: {\n        onhover: { enable: true, mode: \"bubble\" },\n        onclick: { enable: true, mode: \"push\" },\n        resize: true,\n      },\n      modes: {\n        bubble: {\n          distance: 200,\n          size: 12,\n          duration: 2,\n          opacity: 0.8,\n          speed: 3,\n        },\n        push: { particles_nb: 4 },\n      },\n    },\n    retina_detect: true,\n  });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  preventFormReloads();\n  initLoader();\n  initModals(store);\n  initCalendar(store);\n  initAppointments(store);\n  initHeaderDate(store);\n  initParticlesBackground();\n});\n","export function createStore(initialState) {\n  let state = initialState;\n  const listeners = new Set();\n\n  const getState = () => state;\n\n  const setState = (nextState) => {\n    state = nextState;\n    listeners.forEach((fn) => fn(state));\n  };\n  const update = (updater) => setState(updater(state));\n\n  const subscribe = (fn) => {\n    listeners.add(fn);\n    return () => listeners.delete(fn);\n  };\n\n  return { getState, setState, update, subscribe };\n}\n","const TRANSITION_MS = 300;\n\nfunction reduceModals(prevState, action) {\n  const prev = prevState.ui.modals;\n\n  switch (action.type) {\n    case \"OPEN_CALENDAR\":\n      return {\n        ...prevState,\n        ui: {\n          ...prevState.ui,\n          modals: {\n            calendarOpen: true,\n            newAppointmentOpen: false,\n          },\n        },\n      };\n\n    case \"OPEN_NEW\":\n      return {\n        ...prevState,\n        ui: {\n          ...prevState.ui,\n          modals: {\n            calendarOpen: false,\n            newAppointmentOpen: true,\n          },\n        },\n      };\n\n    case \"CLOSE_ALL\":\n      return {\n        ...prevState,\n        ui: {\n          ...prevState.ui,\n          modals: {\n            calendarOpen: false,\n            newAppointmentOpen: false,\n          },\n        },\n      };\n\n    default:\n      return prevState;\n  }\n}\n\nexport function initModals(store) {\n  const overlay = document.querySelector(\"[data-overlay]\");\n  const modalCalendar = document.getElementById(\"modal-calendar\");\n  const modalNew = document.getElementById(\"modal-new\");\n\n  const hideTimers = new Map();\n  let lastActiveEl = null;\n  let prevOpenKey = null;\n\n  function dispatch(action) {\n    store.update((s) => reduceModals(s, action));\n  }\n\n  function setElOpen(el, open) {\n    if (!el) return;\n\n    const timer = hideTimers.get(el);\n    if (timer) {\n      clearTimeout(timer);\n      hideTimers.delete(el);\n    }\n\n    if (open) {\n      el.hidden = false;\n      el.setAttribute(\"aria-hidden\", \"false\");\n      requestAnimationFrame(() => {\n        el.dataset.open = \"true\";\n      });\n      return;\n    }\n\n    el.dataset.open = \"false\";\n    el.setAttribute(\"aria-hidden\", \"true\");\n    const t = setTimeout(() => {\n      el.hidden = true;\n      hideTimers.delete(el);\n    }, TRANSITION_MS);\n    hideTimers.set(el, t);\n  }\n\n  function render(state) {\n    const { calendarOpen, newAppointmentOpen } = state.ui.modals;\n    const anyOpen = calendarOpen || newAppointmentOpen;\n\n    setElOpen(overlay, anyOpen);\n\n    setElOpen(modalCalendar, calendarOpen);\n    setElOpen(modalNew, newAppointmentOpen);\n\n    document\n      .querySelectorAll('[data-action=\"open-calendar\"]')\n      .forEach((btn) =>\n        btn.setAttribute(\"aria-expanded\", String(calendarOpen)),\n      );\n\n    document\n      .querySelectorAll('[data-action=\"open-new-appointment\"]')\n      .forEach((btn) =>\n        btn.setAttribute(\"aria-expanded\", String(newAppointmentOpen)),\n      );\n\n    const openKey = calendarOpen\n      ? \"calendar\"\n      : newAppointmentOpen\n        ? \"new\"\n        : null;\n\n    if (openKey && openKey !== prevOpenKey) {\n      const modal = openKey === \"calendar\" ? modalCalendar : modalNew;\n      modal?.querySelector(\".modal__close\")?.focus();\n    }\n\n    if (!openKey && prevOpenKey) {\n      lastActiveEl?.focus?.();\n      lastActiveEl = null;\n    }\n\n    prevOpenKey = openKey;\n  }\n\n  render(store.getState());\n  store.subscribe(render);\n\n  document.addEventListener(\"click\", (e) => {\n    const el = e.target.closest(\"[data-action]\");\n    if (!el) return;\n\n    const action = el.dataset.action;\n\n    if (action === \"open-calendar\") {\n      lastActiveEl = document.activeElement;\n      dispatch({ type: \"OPEN_CALENDAR\" });\n    }\n\n    if (action === \"open-new-appointment\") {\n      lastActiveEl = document.activeElement;\n      dispatch({ type: \"OPEN_NEW\" });\n    }\n\n    if (action === \"close-all\") {\n      dispatch({ type: \"CLOSE_ALL\" });\n    }\n  });\n\n  document.addEventListener(\"keydown\", (e) => {\n    if (e.key !== \"Escape\") return;\n\n    const { calendarOpen, newAppointmentOpen } = store.getState().ui.modals;\n    if (calendarOpen || newAppointmentOpen) {\n      dispatch({ type: \"CLOSE_ALL\" });\n    }\n  });\n\n  document.addEventListener(\"submit\", (e) => {\n    const form = e.target.closest(\".form\");\n    if (!form) return;\n    e.preventDefault();\n  });\n}\n"],"names":["today","Date","pad2","n","String","padStart","todayISO","getFullYear","getMonth","getDate","state","ui","modals","newAppointmentOpen","calendarOpen","selectedDateISO","calendar","year","month","data","appointments","toISODate","date","addMonths","delta","d","reduceCalendar","prevState","action","cal","type","next","payload","dateISO","isEmpty","v","trim","API_BASE","IS_BROWSER","window","USE_API","location","hostname","STORAGE_KEYS","cloneList","list","Array","isArray","map","item","STORAGE_AVAILABLE","localStorage","key","setItem","removeItem","err","canUseStorage","FALLBACK_SERVICES","fallbackData","services","FALLBACK_APPOINTMENTS","readStoredArray","fallback","raw","getItem","seeded","JSON","stringify","parsed","parse","writeStoredArray","value","localData","sortByTime","a","b","time","localeCompare","SERVICE_META","icon","vaccination","deworming","serviceCatalog","getCalendarFromISO","yearStr","monthStr","split","Number","reduceAppointments","nextAppointments","appointment","filter","id","clearEl","el","firstChild","removeChild","renderEmpty","listEl","label","li","document","createElement","className","textContent","appendChild","renderCard","appt","petType","top","identity","avatar","petIcon","setAttribute","identityText","title","petName","owner","ownerName","append","footer","service","serviceMeta","serviceId","serviceIcon","serviceLabel","actions","editBtn","dataset","appointmentId","editIcon","initAppointments","store","modalNew","getElementById","form","querySelector","submitIcon","submitButton","serviceSelect","elements","dateInputEl","notice","noticeMessage","noticeTimer","noticeCooldown","noticeCooldownTimer","noticeResetTimer","FIELDS","renderFormErrors","errors","querySelectorAll","forEach","getAttribute","closeNotice","open","clearTimeout","setTimeout","hidden","showNotice","message","requestAnimationFrame","field","setInvalid","updateSubmitIcon","formatNoticeMessage","messages","Object","values","Boolean","length","join","async","fetchJson","url","options","res","fetch","ok","Error","json","applyServices","keys","fragment","createDocumentFragment","opt","remove","render","getState","applyAppointments","update","prev","loadAppointments","isInvalid","target","removeAttribute","slots","morning","afternoon","night","todays","slice","sort","grouped","timeHHMM","hh","getPeriod","push","renderDaily","selected","classList","add","subscribe","disabled","loadServices","addEventListener","updateCalendar","nextState","e","HTMLInputElement","name","preventDefault","fd","FormData","draft","get","includes","mm","isFinite","now","scheduled","setHours","getTime","validateAppointment","f","hasConflict","some","conflictError","Math","random","toString","saved","method","headers","body","createAppointment","dispatchAdd","reset","HTMLElement","btn","closest","stopPropagation","dispatchRemove","encodeURIComponent","deleteAppointment","initialState","listeners","Set","setState","fn","updater","delete","createStore","contains","loader","appContent","start","performance","progressBar","percentText","catRunner","dogRunner","elapsed","progress","min","percent","floor","style","width","left","initLoader","overlay","modalCalendar","hideTimers","Map","lastActiveEl","prevOpenKey","dispatch","s","reduceModals","setElOpen","timer","t","set","openKey","modal","focus","activeElement","initModals","monthEl","yearEl","gridEl","countEl","count","y","m","cells","startDay","getDay","i","setDate","day","inMonth","getMonthGrid","innerHTML","actualTodayISO","c","hasDog","hasCat","onDay","buildDotsForDate","dots","actionEl","dayEl","withDate","initCalendar","timeEl","lastDateISO","selectedISO","parseISO","dateTime","toLocaleDateString","weekday","replace","toUpperCase","_","ch","formatPtBrDate","initHeaderDate","particlesJS","particles","number","density","enable","value_area","color","shape","image","src","height","opacity","anim","speed","opacity_min","sync","size","size_min","line_linked","distance","move","direction","straight","out_mode","bounce","interactivity","detect_on","events","onhover","mode","onclick","resize","modes","bubble","duration","particles_nb","retina_detect"],"ignoreList":[],"sourceRoot":""}